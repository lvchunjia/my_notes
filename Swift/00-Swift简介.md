

> [Swift ç¼–ç¨‹è¯­è¨€](https://www.cnswift.org/)ï¼šåŒæ­¥æ›´æ–° Swift 5.10 





# å…³äº Swift

Swift æ˜¯ç¼–å†™ç¨‹åºçš„ç»ä½³é€‰æ‹©ï¼Œæ— è®ºæ˜¯æ‰‹æœºã€ç”µè„‘è¿˜æ˜¯æœåŠ¡å™¨ï¼Œä»»ä½•èƒ½è·‘ä»£ç çš„è®¾å¤‡éƒ½æ˜¯å¦‚æ­¤ã€‚å®ƒæ˜¯ä¸€é—¨é›†ç°ä»£è¯­è¨€ä¹‹å¤§æˆï¼Œé›†ç»“äº†è‹¹æœçš„å·¥ç¨‹å¸ˆæ–‡åŒ–ç²¾é«“ä»¥åŠå¼€æºç¤¾åŒºå¤šæ ·åŒ–äºä¸€èº«çš„ç¼–ç¨‹è¯­è¨€ã€‚ç¼–è¯‘å™¨ä¸ºä¸“ä¸ºæ€§èƒ½æ‰€è°ƒä¼˜ï¼Œè¯­è¨€ä¸“ä¸ºå¼€å‘æ‰€ä¼˜åŒ–ï¼ŒäºŒè€…ç»ä¸äº’ç›¸å¦¥åã€‚

Swift è¯­è¨€è¿˜å¯¹æ–°çš„ç¨‹åºå‘˜ååˆ†å‹å¥½ã€‚å®ƒæ˜¯ç¬¬ä¸€ä¸ªå·¥ä¸šçº§ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œå´åˆåƒè„šæœ¬è¯­è¨€é‚£æ ·å¯Œæœ‰å¼ åŠ›ä¸”ååˆ†æœ‰è¶£ã€‚åœ¨ Playground ç¼–å†™ä»£ç å¹¶å®æ—¶æŸ¥çœ‹ Swift ä»£ç è¿ç®—ç»“æœï¼Œå®Œå…¨ä¸éœ€è¦ä»å¤´ç¼–è¯‘ç„¶åè¿è¡Œè½¯ä»¶ã€‚

Swift é€šè¿‡å‘å…¶ä»–ç°ä»£ç¼–ç¨‹æ¨¡å¼å­¦ä¹ ï¼Œå®šä¹‰äº†å¤§é‡ç±»æ¥é¿å…å¸¸è§çš„ç¼–ç¨‹é”™è¯¯ï¼š

- å˜é‡ä¸€å®šæ˜¯åœ¨ä½¿ç”¨å‰åˆå§‹åŒ–çš„ï¼›
- æ•°ç»„ç´¢å¼•ä¼šæ£€æŸ¥è¶Šç•Œé”™è¯¯ï¼›
- æ•´æ•°ä¼šæ£€æŸ¥æº¢å‡ºï¼›
- å¯é€‰é¡¹ä¿è¯äº† nil å€¼ä¼šæ˜¾å¼å¤„ç†ï¼›
- å†…å­˜è‡ªåŠ¨ç®¡ç†ï¼›
- é”™è¯¯å¤„ç†å…è®¸ä»æ„å¤–é”™è¯¯ä¸­æ¢å¤æ§åˆ¶ã€‚

Swift ä»£ç ä¸ºå¤§éƒ¨åˆ†ç°ä»£ç¡¬ä»¶ç¼–è¯‘å’Œä¼˜åŒ–ã€‚è¯­æ³•å’ŒåŸºæœ¬åº“éƒ½åŸºäºæŒ‡å¯¼åŸåˆ™è®¾è®¡ï¼Œè¿™æ˜¾ç„¶ä¹Ÿæ˜¯ä½ è®©ä»£ç çš„æœ€ä½³æ–¹å¼ã€‚è¿™ä½¿å¾—é›†å®‰å…¨å’Œé€Ÿåº¦äºä¸€èº«çš„ Swift é€‚ç”¨äºä»»ä½•åœºæ™¯ï¼Œä»ç¼–å†™ â€œHello, world!â€åˆ°æ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œéƒ½æ˜¯ä¸Šä¸Šä¹‹é€‰ã€‚

Swift ç”¨è½»é‡çº§çš„è¯­æ³•é›†åˆå¼ºå¤§çš„ç±»å‹æ¥å£å’Œæ¨¡å¼åŒ¹é…ï¼Œèƒ½å¤ŸæŠŠå¤æ‚çš„æƒ³æ³•ä»¥ç®€æ´ä¼˜é›…çš„å½¢å¼è¡¨è¾¾ã€‚å¾—ç›Šäºæ­¤ï¼Œä»£ç ä¸ä»…ä»…æ›´å¥½å†™äº†ï¼Œè¿˜å˜å¾—æ›´åŠ æ˜“è¯»å’Œç›Šäºä¼˜åŒ–ã€‚



# ç‰ˆæœ¬å…¼å®¹æ€§

æœ¬ä¹¦è®²è¿°çš„æ˜¯ Swift 5.1ï¼Œå®ƒæ˜¯ Xcode 11 ä¸­åŒ…å«çš„é»˜è®¤ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä½¿ç”¨ Xcode 11 æ¥ç¼–è¯‘ç”¨ Swift 5.1ã€Swift 4.2 æˆ– Swift 4 å†™çš„ä»£ç ã€‚

å½“ä½ ä½¿ç”¨ Xcode 11 ç¼–è¯‘ Swift 4 å’Œ Swift 4.2 ä»£ç æ—¶ï¼Œå¤§éƒ¨åˆ† Swift 5.1 çš„åŠŸèƒ½æ˜¯å¯ç”¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„å˜æ›´ä»…å¯¹ Swift 5.1 æˆ–åç»­ç‰ˆæœ¬ç”Ÿæ•ˆï¼š

- è¿”å›ä¸é€æ˜ç±»å‹çš„å‡½æ•°éœ€è¦ Swift 5.1 è¿è¡Œæ—¶ï¼›
- try? è¡¨è¾¾å¼å¹¶ä¸ä¼šä¸ºå·²ç»è¿”å›çš„å¯é€‰é¡¹å¼•å…¥é¢å¤–çš„å¯é€‰æ€§å±‚çº§ï¼›
- å·¨å¤§çš„æ•´æ•°å­—é¢é‡åˆå§‹åŒ–è¡¨è¾¾å¼ä¼šè¢«æ¨æ–­ä¸ºæ­£ç¡®çš„æ•´æ•°ç±»å‹ã€‚æ¯”å¦‚è¯´ï¼Œ UInt64(0xffff_ffff_ffff_ffff) ä¼šè¢«å¤„ç†æˆæ­£ç¡®çš„å€¼è€Œä¸æ˜¯æº¢å‡ºã€‚

ç”¨ Swift 5.1 ç¼–å†™çš„ç›®æ ‡å¯ä»¥ä¾èµ–ç”¨ Swift 4.2 æˆ– Swift 4 ç¼–å†™çš„ç›®æ ‡ï¼Œåä¹‹äº¦ç„¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå·¨å¤§çš„åˆ†æˆå¥½å¤šä¸ª framework çš„é¡¹ç›®ï¼Œä½ å¯ä»¥æ¯æ¬¡åªæŠŠä¸€ä¸ª framework ä» Swift 4 è¿ç§»åˆ° Swift 5.1.



# Swift æ¦‚è§ˆ

ä¾ç…§ä¼ ç»Ÿï¼Œä½¿ç”¨æ–°è¯­è¨€å†™çš„ç¬¬ä¸€ä¸ªç¨‹åºéƒ½åº”è¯¥æ˜¯åœ¨å±å¹•ä¸Šæ‰“å°â€œHello,world!â€ï¼Œä½¿ç”¨ Swift ï¼Œå¯ä»¥åœ¨ä¸€è¡Œä¸­å®Œæˆã€‚

```swift
print("Hello, world!")
```

å¦‚æœä½ äº†è§£å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆ Swift çš„è¯­æ³•ä¸ä¼šè®©ä½ æ„Ÿåˆ°é™Œç”Ÿâ€”â€”åœ¨ Swift è¯­è¨€å½“ä¸­ï¼Œè¿™ä¸€è¡Œä»£ç å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºã€‚ä½ ä¸éœ€è¦ä¸ºæ¯ä¸€ä¸ªåŠŸèƒ½å¯¼å…¥å•ç‹¬çš„åº“æ¯”å¦‚è¾“å…¥è¾“å‡ºå’Œå­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½ã€‚å†™åœ¨å…¨å±€èŒƒå›´çš„ä»£ç å·²è¢«ç”¨æ¥ä½œä¸ºç¨‹åºçš„å…¥å£ï¼Œæ‰€ä»¥ä½ ä¸å†éœ€è¦ main()å‡½æ•°ã€‚åŒæ ·ï¼Œä½ ä¹Ÿä¸å†éœ€è¦åœ¨æ¯å¥ä»£ç åè¾¹å†™åˆ†å·ã€‚



## 1. ç®€å•å€¼

ä½¿ç”¨ letæ¥å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼Œç”¨ varæ¥å£°æ˜ä¸€ä¸ªå˜é‡ã€‚å¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶å¹¶ä¸è¦æ±‚å·²çŸ¥ï¼Œä½†æ˜¯ä½ å¿…é¡»ä¸ºå…¶èµ‹å€¼ä¸€æ¬¡ã€‚

```swift
var myVariable = 42
myVariable = 50
let myConstant = 42
```

å¸¸é‡æˆ–è€…å˜é‡å¿…é¡»æ‹¥æœ‰å’Œä½ èµ‹ç»™å®ƒä»¬çš„å€¼ç›¸åŒçš„ç±»å‹ã€‚ä¸è¿‡ï¼Œå¹¶ä¸éœ€è¦æ€»æ˜¯æ˜¾å¼åœ°å†™å‡ºç±»å‹ã€‚åœ¨å£°æ˜ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™ç›´æ¥ç»™å®ƒä»¬èµ‹å€¼å°±å¯ä»¥è®©ç¼–è¯‘å™¨æ¨æ–­å®ƒä»¬çš„ç±»å‹ã€‚å¦‚æœåˆå§‹å€¼å¹¶ä¸èƒ½æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ï¼ˆæˆ–è€…æ ¹æœ¬æ²¡æœ‰æä¾›åˆå§‹å€¼ï¼‰ï¼Œå°±éœ€è¦åœ¨å˜é‡çš„åè¾¹å†™å‡ºæ¥äº†ï¼Œç”¨å†’å·åˆ†éš”ã€‚

```swift
let implicitInteger = 70
let implicitDouble = 70.0
let explicitDouble: Double = 70
```

å€¼ç»å¯¹ä¸ä¼šéšå¼åœ°è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ã€‚å¦‚æœä½ éœ€è¦å°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºä¸åŒçš„ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„ç±»å‹æ˜¾ç¤ºåœ°å£°æ˜ã€‚

```swift
let label = "The width is "
let width = 94
let widthLabel = label + String(width)
```

ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æŠŠå€¼åŠ å…¥å­—ç¬¦ä¸²ï¼š

```swift
let apples = 3
let oranges = 5
let appleSummary = "I have \(apples) apples."
let fruitSummary = "I have \(apples + oranges) pieces of fruit."
```

ä¸ºå­—ç¬¦ä¸²ä½¿ç”¨ä¸‰ä¸ªåŒå¼•å·ï¼ˆ """ ï¼‰æ¥ä¸€æ¬¡è¾“å…¥å¤šè¡Œå†…å®¹ã€‚åªè¦æ¯ä¸€è¡Œçš„ç¼©è¿›ä¸æœ«å°¾çš„å¼•å·ç›¸åŒï¼Œè¿™äº›ç¼©è¿›éƒ½ä¼šè¢«ç§»é™¤ã€‚æ¯”å¦‚è¯´ï¼š

```swift
let quotation = """
        Even though there's whitespace to the left,
        the actual lines aren't indented.
            Except for this line.
        Double quotes (") can appear without being escaped.
 
        I still have \(apples + oranges) pieces of fruit.
        """
```

ä½¿ç”¨æ–¹æ‹¬å·`[]`æ¥åˆ›å»ºæ•°ç»„æˆ–è€…å­—å…¸ï¼Œå¹¶ä¸”ä½¿ç”¨æ–¹æ‹¬å·æ¥æŒ‰ç…§åºå·æˆ–è€…é”®è®¿é—®å®ƒä»¬çš„å…ƒç´ ã€‚

```swift
var shoppingList = ["catfish", "water", "tulips", "blue paint"]
shoppingList[1] = "bottle of water"
 
var occupations = [
    "Malcolm": "Captain",
    "Kaylee": "Mechanic",
]
occupations["Jayne"] = "Public Relations"
```

æ•°ç»„ä¼šåœ¨ä½ æ·»åŠ å…ƒç´ æ—¶è‡ªåŠ¨å˜é•¿ã€‚

```swift
fruits.append("blueberries")
print(fruits)
// Prints "["strawberries", "grapes", "tangerines", "blueberries"]"
```

ä½¿ç”¨åˆå§‹åŒ–å™¨è¯­æ³•æ¥åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°ç»„æˆ–è€…å­—å…¸ã€‚

```swift
let emptyArray = [String]()
let emptyDictionary = [String: Float]()
```

å¦‚æœç±»å‹ä¿¡æ¯èƒ½è¢«æ¨æ–­ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ç”¨[]æ¥è¡¨ç¤ºç©ºæ•°ç»„ï¼Œç”¨[:]æ¥è¡¨ç¤ºç©ºå­—å…¸ã€‚ä¸¾ä¸ªæ —å­ï¼Œå½“ä½ ç»™å˜é‡è®¾ç½®æ–°çš„å€¼æˆ–è€…ä¼ å‚æ•°ç»™å‡½æ•°çš„æ—¶å€™ã€‚

```swift
shoppingList = []
occupations = [:]
```



## 2. æ§åˆ¶æµ

ä½¿ç”¨ ifå’Œ switchæ¥åšé€»è¾‘åˆ¤æ–­ï¼Œä½¿ç”¨ `for-in`ï¼Œ `for`ï¼Œ` while`ï¼Œä»¥åŠ `repeat-while` æ¥åšå¾ªç¯ã€‚ä½¿ç”¨åœ†æ‹¬å·æŠŠæ¡ä»¶æˆ–è€…å¾ªç¯å˜é‡æ‹¬èµ·æ¥ä¸å†æ˜¯å¼ºåˆ¶çš„äº†ï¼Œä¸è¿‡ä»æ—§éœ€è¦ä½¿ç”¨èŠ±æ‹¬å·æ¥æ‹¬ä½ä»£ç å—ã€‚

```swift
let individualScores = [75, 43, 103, 87, 12]
var teamScore = 0
for score in individualScores {
    if score > 50 {
        teamScore += 3
    } else {
        teamScore += 1
    }
}
print(teamScore)
```



åœ¨ä¸€ä¸ª ifè¯­å¥å½“ä¸­ï¼Œæ¡ä»¶å¿…é¡»æ˜¯å¸ƒå°”è¡¨è¾¾å¼ã€‚ä½ è¿˜å¯ä»¥åœ¨ç­‰äºç¬¦å·èµ‹å€¼æˆ–è€… return åä½¿ç”¨ if æˆ–è€… switch ï¼Œä»¥ä¸åŒçš„æƒ…å†µæ¥é€‰æ‹©å€¼ã€‚

```swift
let scoreDecoration = if teamScore > 10 {
    "ğŸ‰"
} else {
    ""
}
print("Score:", teamScore, scoreDecoration)
// Prints "Score: 11 ğŸ‰"
```

ä½ å¯ä»¥ä¸€èµ·ä½¿ç”¨ ifå’Œ letæ¥æ“ä½œé‚£äº›å¯èƒ½ä¼šä¸¢å¤±çš„å€¼ã€‚è¿™äº›å€¼ä½¿ç”¨å¯é€‰é¡¹è¡¨ç¤ºã€‚å¯é€‰çš„å€¼åŒ…æ‹¬äº†ä¸€ä¸ªå€¼æˆ–è€…ä¸€ä¸ª nilæ¥è¡¨ç¤ºå€¼ä¸å­˜åœ¨ã€‚åœ¨ä¸€ä¸ªå€¼çš„ç±»å‹åè¾¹ä½¿ç”¨é—®å· `?` æ¥æŠŠæŸä¸ªå€¼æ ‡è®°ä¸ºå¯é€‰çš„ã€‚

```swift
var optionalString: String? = "Hello"
print(optionalString == nil)
 
var optionalName: String? = "John Appleseed"
var greeting = "Hello!"
if let name = optionalName {
    greeting = "Hello, \(name)"
}
```

å¦ä¸€ç§å¤„ç†å¯é€‰å€¼çš„æ–¹æ³•æ˜¯ä½¿ç”¨ ?? è¿ç®—ç¬¦æä¾›é»˜è®¤å€¼ã€‚å¦‚æœå¯é€‰å€¼ä¸¢å¤±ï¼Œé»˜è®¤å€¼å°±ä¼šä½¿ç”¨ã€‚

```swift
let nickName: String? = nil
let fullName: String = "John Appleseed"
let informalGreeting = "Hi \(nickName ?? fullName)"
```



Switch é€‰æ‹©è¯­å¥æ”¯æŒä»»æ„ç±»å‹çš„æ•°æ®å’Œå„ç§ç±»å‹çš„æ¯”è¾ƒæ“ä½œâ€”â€”å®ƒä¸å†é™åˆ¶äºæ•´å‹å’Œæµ‹è¯•ç›¸ç­‰ä¸Šã€‚

```swift
let vegetable = "red pepper"
switch vegetable {
case "celery":
    print("Add some raisins and make ants on a log.")
case "cucumber", "watercress":
    print("That would make a good tea sandwich.")
case let x where x.hasSuffix("pepper"):
    print("Is it a spicy \(x)?")
default:
    print("Everything tastes good in soup.")
}
```

æ³¨æ„ let å¯ä»¥ç”¨åœ¨æ¨¡å¼é‡Œæ¥æŒ‡å®šåŒ¹é…çš„å€¼åˆ°ä¸€ä¸ªå¸¸é‡å½“ä¸­ã€‚

 åœ¨æ‰§è¡Œå®Œ switch è¯­å¥é‡ŒåŒ¹é…åˆ°çš„ case ä¹‹åï¼Œç¨‹åºå°±ä¼šä» switch è¯­å¥ä¸­é€€å‡ºã€‚æ‰§è¡Œå¹¶ä¸ä¼šç»§ç»­è·³åˆ°ä¸‹ä¸€ä¸ª case é‡Œï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦æ˜¾å¼åœ°åœ¨æ¯ä¸€ä¸ª case åéƒ½æ ‡è®° break ã€‚



ä½ å¯ä»¥ä½¿ç”¨ for-inæ¥éå†å­—å…¸ä¸­çš„é¡¹ç›®ï¼Œè¿™éœ€è¦æä¾›ä¸€å¯¹å˜é‡åæ¥å‚¨å­˜é”®å€¼å¯¹ã€‚å­—å…¸ä½¿ç”¨æ— åºé›†åˆï¼Œæ‰€ä»¥é”®å€¼çš„éå†ä¹Ÿæ˜¯æ— åºçš„ã€‚

```swift
let interestingNumbers = [
    "Prime": [2, 3, 5, 7, 11, 13],
    "Fibonacci": [1, 1, 2, 3, 5, 8],
    "Square": [1, 4, 9, 16, 25],
]
var largest = 0
for (kind, numbers) in interestingNumbers {
    for number in numbers {
        if number > largest {
            largest = number
        }
    }
}
print(largest)
```



ä½¿ç”¨ whileæ¥é‡å¤ä»£ç å¿«ç›´åˆ°æ¡ä»¶æ”¹å˜ã€‚å¾ªç¯çš„æ¡ä»¶å¯ä»¥æ”¾åœ¨æœ«å°¾ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¾ªç¯è‡³å°‘è¿è¡Œäº†ä¸€æ¬¡ã€‚

```swift
var n = 2
while n < 100 {
    n = n * 2
}
print(n)
 
var m = 2
repeat {
    m = m * 2
} while m < 100
print(m)
```



ä½ å¯ä»¥ä½¿ç”¨ ..<æ¥åˆ›é€ ä¸€ä¸ªåºåˆ—åŒºé—´ï¼š

```swift
var total = 0
for i in 0..<4 {
    total += i
}
print(total)
```

ä½¿ç”¨ ..<æ¥åˆ›å»ºä¸€ä¸ªä¸åŒ…å«æœ€å¤§å€¼çš„åŒºé—´ï¼Œä½¿ç”¨ ... æ¥åˆ›é€ ä¸€ä¸ªåŒ…å«æœ€å¤§å€¼å’Œæœ€å°å€¼çš„åŒºé—´ã€‚



## 3. å‡½æ•°å’Œé—­åŒ…

ä½¿ç”¨ funcæ¥å£°æ˜ä¸€ä¸ªå‡½æ•°ã€‚é€šè¿‡åœ¨åå­—ä¹‹ååœ¨åœ†æ‹¬å·å†…æ·»åŠ ä¸€ç³»åˆ—å‚æ•°æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ä½¿ç”¨ ->æ¥åˆ†éš”å½¢å¼å‚æ•°åå­—ç±»å‹å’Œå‡½æ•°è¿”å›çš„ç±»å‹ã€‚

```swift
func greet(person: String, day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet(person: "Bob", day: "Tuesday")
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä½¿ç”¨ä»–ä»¬çš„å½¢å¼å‚æ•°åæ¥ä½œä¸ºå®é™…å‚æ•°æ ‡ç­¾ã€‚åœ¨å½¢å¼å‚æ•°å‰å¯ä»¥å†™è‡ªå®šä¹‰çš„å®é™…å‚æ•°æ ‡ç­¾ï¼Œæˆ–è€…ä½¿ç”¨ _ æ¥é¿å…ä½¿ç”¨å®é™…å‚æ•°æ ‡ç­¾ã€‚

```swift
func greet(_ person: String, on day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet("John", on: "Wednesday")
```

ä½¿ç”¨å…ƒç»„æ¥åˆ›å»ºå¤åˆå€¼â€”â€”æ¯”å¦‚ï¼Œä¸ºäº†ä»å‡½æ•°ä¸­è¿”å›å¤šä¸ªå€¼ã€‚å…ƒç»„ä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡åå­—æˆ–è€…æ•°å­—è°ƒç”¨ã€‚

```swift
func calculateStatistics(scores: [Int]) -> (min: Int, max: Int, sum: Int) {
    var min = scores[0]
    var max = scores[0]
    var sum = 0
    
    for score in scores {
        if score > max {
            max = score
        } else if score < min {
            min = score
        }
        sum += score
    }
    
    return (min, max, sum)
}
let statistics = calculateStatistics(scores: [5, 3, 100, 3, 9])
print(statistics.sum)
print(statistics.2)
```

å‡½æ•°åŒæ ·å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œç„¶åæŠŠå®ƒä»¬å­˜æ”¾è¿›æ•°ç»„å½“ä¸­ã€‚

```swift
func sumOf(numbers: Int...) -> Int {
    var sum = 0
    for number in numbers {
        sum += number
    }
    return sum
}
sumOf()
sumOf(numbers: 42, 597, 12)
```

å‡½æ•°å¯ä»¥å†…åµŒã€‚å†…åµŒçš„å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°é‡Œçš„å˜é‡ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å†…åµŒå‡½æ•°æ¥ç»„ç»‡ä»£ç ï¼Œä»¥é¿å…æŸä¸ªå‡½æ•°å¤ªé•¿æˆ–è€…å¤ªè¿‡å¤æ‚ã€‚

```swift
func returnFifteen() -> Int {
    var y = 10
    func add() {
        y += 5
    }
    add()
    return y
}
returnFifteen()
```

å‡½æ•°æ˜¯ä¸€ç­‰ç±»å‹ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå€¼æ¥è¿”å›ã€‚

```swift
func makeIncrementer() -> ((Int) -> Int) {
    func addOne(number: Int) -> Int {
        return 1 + number
    }
    return addOne
}
var increment = makeIncrementer()
increment(7)
```

å‡½æ•°ä¹Ÿå¯ä»¥æŠŠå¦å¤–ä¸€ä¸ªå‡½æ•°ä½œä¸ºå…¶è‡ªèº«çš„å‚æ•°ã€‚

```swift
func hasAnyMatches(list: [Int], condition: (Int) -> Bool) -> Bool {
    for item in list {
        if condition(item) {
            return true
        }
    }
    return false
}
func lessThanTen(number: Int) -> Bool {
    return number < 10
}
var numbers = [20, 19, 7, 12]
hasAnyMatches(list: numbers, condition: lessThanTen)
```

å‡½æ•°å…¶å®å°±æ˜¯é—­åŒ…çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼šä¸€æ®µå¯ä»¥è¢«éšåè°ƒç”¨çš„ä»£ç å—ã€‚é—­åŒ…ä¸­çš„ä»£ç å¯ä»¥è®¿é—®å…¶ç”Ÿæ•ˆèŒƒå›´å†…çš„å˜é‡å’Œå‡½æ•°ï¼Œå°±ç®—æ˜¯é—­åŒ…åœ¨å®ƒå£°æ˜çš„èŒƒå›´ä¹‹å¤–è¢«æ‰§è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·`{}`æ‹¬èµ·ä¸€ä¸ªæ²¡æœ‰åå­—çš„é—­åŒ…ã€‚åœ¨é—­åŒ…ä¸­ä½¿ç”¨ inæ¥åˆ†éš”å®é™…å‚æ•°å’Œè¿”å›ç±»å‹ã€‚

```swift
numbers.map({
    (number: Int) -> Int in
    let result = 3 * number
    return result
})
```

ä½ æœ‰æ›´å¤šçš„é€‰æ‹©æ¥æŠŠé—­åŒ…å†™çš„æ›´åŠ ç®€æ´ã€‚å½“ä¸€ä¸ªé—­åŒ…çš„ç±»å‹å·²ç»å¯çŸ¥ï¼Œæ¯”å¦‚è¯´æŸä¸ªå§”æ‰˜çš„å›è°ƒï¼Œä½ å¯ä»¥å»æ‰å®ƒçš„å‚æ•°ç±»å‹ï¼Œå®ƒçš„è¿”å›ç±»å‹ï¼Œæˆ–è€…éƒ½å»æ‰ã€‚

å•è¯­å¥é—­åŒ…éšå¼åœ°è¿”å›è¯­å¥æ‰§è¡Œçš„ç»“æœã€‚

```swift
let mappedNumbers = numbers.map({ number in 3 * number })
print(mappedNumbers)
```

ä½ å¯ä»¥è°ƒç”¨å‚æ•°é€šè¿‡æ•°å­—è€Œéåå­—â€”â€”è¿™ä¸ªç‰¹æ€§åœ¨éå¸¸ç®€çŸ­çš„é—­åŒ…å½“ä¸­å°¤å…¶æœ‰ç”¨ã€‚å½“ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‡½æ•°æœ€åä¸€ä¸ªå‚æ•°å‡ºå…¥æ—¶ï¼Œå¯ä»¥ç›´æ¥è·Ÿåœ¨åœ†æ‹¬å·åè¾¹ã€‚å¦‚æœé—­åŒ…æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°ï¼Œä½ å¯ä»¥å»æ‰åœ†æ‹¬å·ç›´æ¥å†™é—­åŒ…ã€‚

```swift
let sortedNumbers = numbers.sorted { $0 > $1 }
print(sortedNumbers)
```



## 4. å¯¹è±¡å’Œç±»

é€šè¿‡åœ¨ classåæ¥ç±»åç§°æ¥åˆ›å»ºä¸€ä¸ªç±»ã€‚åœ¨ç±»é‡Œè¾¹å£°æ˜å±æ€§ä¸å£°æ˜å¸¸é‡æˆ–è€…å˜é‡çš„æ–¹æ³•æ˜¯ç›¸åŒçš„ï¼Œå”¯ä¸€çš„åŒºåˆ«çš„å®ƒä»¬åœ¨ç±»ç¯å¢ƒä¸‹ã€‚åŒæ ·çš„ï¼Œæ–¹æ³•å’Œå‡½æ•°çš„å£°æ˜ä¹Ÿæ˜¯ç›¸åŒçš„å†™æ³•ã€‚

```swift
class Shape {
    var numberOfSides = 0
    func simpleDescription() -> String {
        return "A shape with \(numberOfSides) sides."
    }
}
```

```swift
// åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹
var shape = Shape()
// è®¿é—®å®ä¾‹é‡Œçš„å±æ€§å’Œæ–¹æ³•
shape.numberOfSides = 7
var shapeDescription = shape.simpleDescription()
```

è¿™ä¸ª Shapeç±»çš„ç‰ˆæœ¬ç¼ºå¤±äº†ä¸€äº›é‡è¦çš„ä¸œè¥¿ï¼šä¸€ä¸ªç”¨åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™æ¥è®¾ç½®ç±»çš„åˆå§‹åŒ–å™¨ã€‚ä½¿ç”¨ initæ¥åˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚

```swift
class NamedShape {
    var numberOfSides: Int = 0
    var name: String
    
    init(name: String) {
        self.name = name
    }
    
    func simpleDescription() -> String {
        return "A shape with \(numberOfSides) sides."
    }
}
```

æ³¨æ„ä½¿ç”¨ selfæ¥åŒºåˆ† nameå±æ€§è¿˜æ˜¯åˆå§‹åŒ–å™¨é‡Œçš„ nameå‚æ•°ã€‚æ¯ä¸€ä¸ªå±æ€§éƒ½éœ€è¦èµ‹å€¼â€”â€”è¦ä¹ˆåœ¨å£°æ˜çš„æ—¶å€™ï¼ˆæ¯”å¦‚è¯´ numberOfSidesï¼‰ï¼Œè¦ä¹ˆå°±è¦åœ¨åˆå§‹åŒ–å™¨é‡Œèµ‹å€¼ï¼ˆæ¯”å¦‚è¯´ nameï¼‰ã€‚



ä½¿ç”¨ deinitæ¥åˆ›å»ºä¸€ä¸ªååˆå§‹åŒ–å™¨ï¼Œå¦‚æœä½ éœ€è¦åœ¨é‡Šæ”¾å¯¹è±¡ä¹‹å‰æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œçš„è¯ã€‚

å£°æ˜å­ç±»å°±åœ¨å®ƒåå­—åé¢è·Ÿä¸Šçˆ¶ç±»çš„åå­—ï¼Œç”¨å†’å·åˆ†éš”ã€‚åˆ›å»ºç±»ä¸éœ€è¦ä»ä»€ä¹ˆæ ‡å‡†æ ¹ç±»æ¥ç»§æ‰¿ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŒ‰éœ€åŒ…å«æˆ–è€…å»æ‰çˆ¶ç±»å£°æ˜ã€‚

å­ç±»çš„æ–¹æ³•å¦‚æœè¦é‡å†™çˆ¶ç±»çš„å®ç°ï¼Œåˆ™éœ€è¦ä½¿ç”¨ overrideâ€”â€”ä¸ä½¿ç”¨ overrideå…³é”®å­—æ¥æ ‡è®°åˆ™ä¼šå¯¼è‡´ç¼–è¯‘å™¨æŠ¥é”™ã€‚ç¼–è¯‘å™¨åŒæ ·ä¹Ÿä¼šæ£€æµ‹ä½¿ç”¨ overrideçš„æ–¹æ³•æ˜¯å¦å­˜åœ¨äºçˆ¶ç±»å½“ä¸­ã€‚

```swift
class Square: NamedShape {
    var sideLength: Double
    
    init(sideLength: Double, name: String) {
        self.sideLength = sideLength
        super.init(name: name)
        numberOfSides = 4
    }
    
    func area() ->  Double {
        return sideLength * sideLength
    }
    
    override func simpleDescription() -> String {
        return "A square with sides of length \(sideLength)."
    }
}
let test = Square(sideLength: 5.2, name: "my test square")
test.area()
test.simpleDescription()
```

é™¤äº†å­˜å‚¨å±æ€§ï¼Œä½ ä¹Ÿå¯ä»¥æ‹¥æœ‰å¸¦æœ‰ getter å’Œ setter çš„è®¡ç®—å±æ€§ã€‚

```swift
class EquilateralTriangle: NamedShape {
    var sideLength: Double = 0.0
    
    init(sideLength: Double, name: String) {
        self.sideLength = sideLength
        super.init(name: name)
        numberOfSides = 3
    }
    
    var perimeter: Double {
        get {
            return 3.0 * sideLength
        }
        set {
            sideLength = newValue / 3.0
        }
    }
    
    override func simpleDescription() -> String {
        return "An equilateral triangle with sides of length \(sideLength)."
    }
}
var triangle = EquilateralTriangle(sideLength: 3.1, name: "a triangle")
print(triangle.perimeter)
triangle.perimeter = 9.9
print(triangle.sideLength)
```

åœ¨ perimeterçš„ setter ä¸­ï¼Œæ–°å€¼è¢«éšå¼åœ°å‘½åä¸º newValueã€‚ä½ å¯ä»¥æä¾›ä¸€ä¸ªæ˜¾å¼çš„åå­—æ”¾åœ¨ set åè¾¹çš„åœ†æ‹¬å·é‡Œã€‚

æ³¨æ„ EquilateralTriangleç±»çš„åˆå§‹åŒ–å™¨æœ‰ä¸‰ä¸ªä¸åŒçš„æ­¥éª¤ï¼š

1. è®¾å®šå­ç±»å£°æ˜çš„å±æ€§çš„å€¼ï¼›
2. è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ï¼›
3. æ”¹å˜çˆ¶ç±»å®šä¹‰çš„å±æ€§ä¸­çš„å€¼ï¼Œä»¥åŠå…¶ä»–ä»»ä½•ä½¿ç”¨æ–¹æ³•ï¼Œgetter æˆ–è€… setter ç­‰éœ€è¦åœ¨è¿™æ—¶å€™å®Œæˆçš„å†…å®¹ã€‚

 å¦‚æœä½ ä¸éœ€è¦è®¡ç®—å±æ€§ä½†ä»ç„¶éœ€è¦åœ¨è®¾ç½®ä¸€ä¸ªæ–°å€¼çš„å‰åæ‰§è¡Œä»£ç ï¼Œä½¿ç”¨ willSetå’Œ didSetã€‚æ¯”å¦‚è¯´ï¼Œä¸‹é¢çš„ç±»ç¡®ä¿ä¸‰è§’å½¢çš„è¾¹é•¿å§‹ç»ˆå’Œæ­£æ–¹å½¢çš„è¾¹é•¿ç›¸åŒã€‚

```swift
class TriangleAndSquare {
    var triangle: EquilateralTriangle {
        willSet {
            square.sideLength = newValue.sideLength
        }
    }
    var square: Square {
        willSet {
            triangle.sideLength = newValue.sideLength
        }
    }
    init(size: Double, name: String) {
        square = Square(sideLength: size, name: name)
        triangle = EquilateralTriangle(sideLength: size, name: name)
    }
}
var triangleAndSquare = TriangleAndSquare(size: 10, name: "another test shape")
print(triangleAndSquare.square.sideLength)
print(triangleAndSquare.triangle.sideLength)
triangleAndSquare.square = Square(sideLength: 50, name: "larger square")
print(triangleAndSquare.triangle.sideLength)
```

å½“ä½ æ“ä½œå¯é€‰é¡¹çš„å€¼çš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨å¯é€‰é¡¹å‰è¾¹ä½¿ç”¨ ?æ¯”å¦‚æ–¹æ³•ï¼Œå±æ€§å’Œä¸‹æ ‡è„šæœ¬ã€‚å¦‚æœ ?å‰çš„å€¼æ˜¯ nilï¼Œé‚£ ?åçš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥å¹¶ä¸”æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼éƒ½æ˜¯ nilã€‚å¦åˆ™ï¼Œå¯é€‰é¡¹çš„å€¼å°†è¢«å±•å¼€ï¼Œç„¶å ?åè¾¹çš„ä»£ç æ ¹æ®å±•å¼€çš„å€¼æ‰§è¡Œã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µå½“ä¸­ï¼Œè¡¨è¾¾å¼çš„å€¼æ˜¯ä¸€ä¸ªå¯é€‰çš„å€¼ã€‚

```swift
let optionalSquare: Square? = Square(sideLength: 2.5, name: "optional square")
let sideLength = optionalSquare?.sideLength
```



## 5. æšä¸¾å’Œç»“æ„ä½“

ä½¿ç”¨ enumæ¥åˆ›å»ºæšä¸¾ï¼Œç±»ä¼¼äºç±»å’Œå…¶ä»–æ‰€æœ‰çš„å‘½åç±»å‹ï¼Œæšä¸¾ä¹Ÿèƒ½å¤ŸåŒ…å«æ–¹æ³•ã€‚

```swift
enum Rank: Int {
    case ace = 1
    case two, three, four, five, six, seven, eight, nine, ten
    case jack, queen, king
    func simpleDescription() -> String {
        switch self {
        case .ace:
            return "ace"
        case .jack:
            return "jack"
        case .queen:
            return "queen"
        case .king:
            return "king"
        default:
            return String(self.rawValue)
        }
    }
}
let ace = Rank.ace
let aceRawValue = ace.rawValue
```



é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwift ä»é›¶å¼€å§‹ç»™åŸå§‹å€¼èµ‹å€¼åè¾¹é€’å¢ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æŒ‡å®šç‰¹å®šçš„å€¼æ¥æ”¹å˜è¿™ä¸€è¡Œä¸ºã€‚åœ¨ä¸Šè¾¹çš„æ —å­å½“ä¸­ï¼ŒåŸå§‹å€¼çš„æšä¸¾ç±»å‹æ˜¯ Intï¼Œæ‰€ä»¥ä½ åªéœ€è¦ç¡®å®šç¬¬ä¸€ä¸ªåŸå§‹å€¼ã€‚å‰©ä¸‹çš„åŸå§‹å€¼æ˜¯æŒ‰ç…§é¡ºåºæŒ‡å®šçš„ã€‚ä½ åŒæ ·å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–è€…æµ®ç‚¹æ•°ä½œä¸ºæšä¸¾çš„åŸå§‹å€¼ã€‚ä½¿ç”¨ rawValue å±æ€§æ¥è®¿é—®æšä¸¾æˆå‘˜çš„åŸå§‹å€¼ã€‚

ä½¿ç”¨ init?(rawValue:)`` åˆå§‹åŒ–å™¨æ¥ä»ä¸€ä¸ªåŸå§‹å€¼åˆ›å»ºæšä¸¾çš„å®ä¾‹ã€‚

```swift
if let convertedRank = Rank(rawValue: 3) {
    let threeDescription = convertedRank.simpleDescription()
}
```

æšä¸¾æˆå‘˜çš„å€¼æ˜¯å®é™…çš„å€¼ï¼Œä¸æ˜¯åŸå§‹å€¼çš„å¦ä¸€ç§å†™æ³•ã€‚äº‹å®ä¸Šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ²¡æœ‰ä¸€ä¸ªæœ‰æ„ä¹‰çš„åŸå§‹å€¼ï¼Œä½ æ ¹æœ¬æ²¡æœ‰å¿…è¦æä¾›ä¸€ä¸ªã€‚

```swift
enum Suit {
    case spades, hearts, diamonds, clubs
    func simpleDescription() -> String {
        switch self {
        case .spades:
            return "spades"
        case .hearts:
            return "hearts"
        case .diamonds:
            return "diamonds"
        case .clubs:
            return "clubs"
        }
    }
}
let hearts = Suit.hearts
let heartsDescription = hearts.simpleDescription()
```





> **å®éªŒ**
>
> æ·»åŠ ä¸€ä¸ª color()æ–¹æ³•åˆ° Suitï¼Œä¸ºé»‘æ¡ƒå’Œæ¢…èŠ±è¿”å›â€œblackâ€ï¼Œä¸ºçº¢æ¡ƒå’Œæ–¹ç‰‡è¿”å›â€œredâ€ã€‚

æ³¨æ„æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è°ƒç”¨æšä¸¾çš„ heartsæˆå‘˜ï¼šå½“ç»™ heartsæŒ‡å®šä¸€ä¸ªå¸¸é‡æ—¶ï¼Œæšä¸¾æˆå‘˜ Suit.heartsä¼šè¢«ä»¥å…¨åçš„æ–¹å¼è°ƒç”¨å› ä¸ºå¸¸é‡å¹¶æ²¡æœ‰æ˜¾å¼åœ°æŒ‡å®šç±»å‹ã€‚åœ¨ Switch è¯­å¥å½“ä¸­ï¼Œæšä¸¾æˆå‘˜å¯ä»¥é€šè¿‡ç¼©å†™çš„æ–¹å¼ .heartsè¢«è°ƒç”¨ï¼Œå› ä¸º selfå·²ç»æ˜ç¡®äº†æ˜¯ suitã€‚ä½ å¯ä»¥åœ¨ä»»ä½•å€¼çš„ç±»å‹å·²ç»æ˜ç¡®çš„åœºæ™¯ä¸‹ä½¿ç”¨ä½¿ç”¨ç¼©å†™ã€‚

å¦‚æœæšä¸¾æ‹¥æœ‰åŸå§‹å€¼ï¼Œè¿™äº›å€¼åœ¨å£°æ˜æ—¶ç¡®å®šï¼Œå°±æ˜¯è¯´æ¯ä¸€ä¸ªè¿™ä¸ªæšä¸¾çš„å®ä¾‹éƒ½å°†æ‹¥æœ‰ç›¸åŒçš„åŸå§‹å€¼ã€‚å¦ä¸€ä¸ªé€‰æ‹©æ˜¯è®©caseä¸å€¼å…³è”â€”â€”è¿™äº›å€¼åœ¨ä½ åˆå§‹åŒ–å®ä¾‹çš„æ—¶å€™ç¡®å®šï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥åœ¨æ¯ä¸ªå®ä¾‹ä¸­ä¸åŒäº†ã€‚æ¯”å¦‚è¯´ï¼Œè€ƒè™‘åœ¨æœåŠ¡å™¨ä¸Šè¯·æ±‚æ—¥å‡ºå’Œæ—¥è½æ—¶é—´çš„caseï¼ŒæœåŠ¡å™¨è¦ä¹ˆè¿”å›è¯·æ±‚çš„ä¿¡æ¯ï¼Œè¦ä¹ˆè¿”å›é”™è¯¯ä¿¡æ¯ã€‚

| 1234567891011121314 | enum ServerResponse {  case result(String, String)  case failure(String)} let success = ServerResponse.result("6:00 am", "8:09 pm")let failure = ServerResponse.failure("Out of cheese.") switch success {case let .result(sunrise, sunset):  print("Sunrise is at \(sunrise) and sunset is at \(sunset).")case let .failure(message):  print("Failure... \(message)")} |
| ------------------- | ------------------------------------------------------------ |
|                     |                                                              |



> å®éªŒ
>
> æ·»åŠ ç¬¬ä¸‰ä¸ª case åˆ° ServerResponse å’Œ switchã€‚

æ³¨æ„ç°åœ¨æ—¥å‡ºå’Œæ—¥è½æ—¶é—´æ˜¯ä» ServerResponse å€¼ä¸­ä»¥switch case åŒ¹é…çš„å½¢å¼å–å‡ºçš„ã€‚

ä½¿ç”¨ structæ¥åˆ›å»ºç»“æ„ä½“ã€‚ç»“æ„ä½“æä¾›å¾ˆå¤šç±»ä¼¼ä¸ç±»çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬æ–¹æ³•å’Œåˆå§‹åŒ–å™¨ã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸€ç‚¹åŒºåˆ«å°±æ˜¯ç»“æ„ä½“æ€»æ˜¯ä¼šåœ¨ä¼ é€’çš„æ—¶å€™æ‹·è´å…¶è‡ªèº«ï¼Œè€Œç±»åˆ™ä¼šä¼ é€’å¼•ç”¨ã€‚

| 123456789 | struct Card {  var rank: Rank  var suit: Suit  func simpleDescription() -> String {    return "The \(rank.simpleDescription()) of \(suit.simpleDescription())"  }}let threeOfSpades = Card(rank: .three, suit: .spades)let threeOfSpadesDescription = threeOfSpades.simpleDescription() |
| --------- | ------------------------------------------------------------ |
|           |                                                              |



> **å®éªŒ**
>
> ç»™ Card æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥åˆ›å»ºä¸€æ•´å‰¯æ‰‘å…‹ç‰Œï¼Œå¹¶ä¸”æŠŠæ¯å¼ ç‰Œçš„ rank å’Œ suit å¯¹åº”èµ·æ¥ã€‚

## å¹¶å‘

ä½¿ç”¨ async æ¥æ ‡è®°å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ã€‚

| 123456 | func fetchUserID(from server: String) async -> Int {  if server == "primary" {    return 97  }  return 501} |
| ------ | ------------------------------------------------------------ |
|        |                                                              |

ä½¿ç”¨ await æ¥æ ‡è®°å¯¹å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨ã€‚

| 1234567 | func fetchUsername(from server: String) async -> String {  let userID = await fetchUserID(from: server)  if userID == 501 {    return "John Appleseed"  }  return "Guest"} |
| ------- | ------------------------------------------------------------ |
|         |                                                              |

ä½¿ç”¨ async let è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œå¯è®©å®ƒä¸å…¶ä»–å¼‚æ­¥å‡½æ•°å¹¶è¡Œæ‰§è¡Œã€‚å½“ä½ è¦ç”¨å®ƒè¿”å›çš„å€¼æ—¶ï¼Œå†ä½¿ç”¨ await ã€‚

| 123456 | func connectUser(to server: String) async {  async let userID = fetchUserID(from: server)  async let username = fetchUsername(from: server)  let greeting = await "Hello \(username), user ID \(userID)"  print(greeting)} |
| ------ | ------------------------------------------------------------ |
|        |                                                              |

ä½¿ç”¨ Task åœ¨åŒæ­¥ä»£ç ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œä¸ç”¨ç­‰å®ƒè¿”å›ã€‚

| 1234 | Task {  await connectUser(to: "primary")}*// Prints "Hello Guest, user ID 97"* |
| ---- | ------------------------------------------------------------ |
|      |                                                              |

ä½¿ç”¨ä»»åŠ¡ç»„æ¥æ„é€ å¹¶å‘ä»£ç ã€‚

| 1234567891011121314 | let userIDs = await withTaskGroup(of: Int.self) { group in  for server in ["primary", "secondary", "development"] {    group.addTask {      return await fetchUserID(from: server)    }  }   var results: [Int] = []  for await result in group {    results.append(result)  }  return results} |
| ------------------- | ------------------------------------------------------------ |
|                     |                                                              |

æ‰§è¡Œè€…å’Œç±»å·®ä¸å¤šï¼Œé™¤äº†å®ƒä»¬ç¡®ä¿ä¸åŒå¼‚æ­¥å‡½æ•°å¯ä»¥åœ¨åŒä¸€æ—¶é—´å®‰å…¨åœ°ä¸åŒä¸€ä¸ªæ‰§è¡Œè€…çš„å®ä¾‹è¿›è¡Œäº¤äº’ã€‚

| 12345678910 | actor ServerConnection {  var server: String = "primary"  private var activeUsers: [Int] = []  func connect() async -> Int {    let userID = await fetchUserID(from: server)    *// ... communicate with server ...*    activeUsers.append(userID)    return userID  }} |
| ----------- | ------------------------------------------------------------ |
|             |                                                              |

å½“ä½ è°ƒç”¨æ‰§è¡Œè€…çš„æ–¹æ³•æˆ–è€…è®¿é—®å®ƒçš„å±æ€§æ—¶ï¼Œè¦ç”¨ await æ ‡è®°ä»£ç ä»¥è¡¨æ˜å®ƒå¯èƒ½éœ€è¦ç­‰å¾…å…¶ä»–æ­£åœ¨è®¿é—®çš„ä»£ç ç»“æŸã€‚

| 12   | let server = ServerConnection()let userID = await server.connect() |
| ---- | ------------------------------------------------------------ |
|      |                                                              |



## åè®®å’Œæ‰©å±•

ä½¿ç”¨ protocolæ¥å£°æ˜åè®®ã€‚

| 1234 | protocol ExampleProtocol {  var simpleDescription: String { get }  mutating func adjust()} |
| ---- | ------------------------------------------------------------ |
|      |                                                              |

ç±»ï¼Œæšä¸¾ä»¥åŠç»“æ„ä½“éƒ½å…¼å®¹åè®®ã€‚





| 1234567891011121314151617181920 | class SimpleClass: ExampleProtocol {  var simpleDescription: String = "A very simple class."  var anotherProperty: Int = 69105  func adjust() {    simpleDescription += " Now 100% adjusted."  }}var a = SimpleClass()a.adjust()let aDescription = a.simpleDescription struct SimpleStructure: ExampleProtocol {  var simpleDescription: String = "A simple structure"  mutating func adjust() {    simpleDescription += " (adjusted)"  }}var b = SimpleStructure()b.adjust()let bDescription = b.simpleDescription |
| ------------------------------- | ------------------------------------------------------------ |
|                                 |                                                              |



> **å®éªŒ**
>
> ç»™ ExampleProtocol æ·»åŠ å¦å¤–ä¸€ä¸ªè¦æ±‚ã€‚å¦‚æœè¦è®© SimpleClass å’Œ SimpleStructure ä¾æ—§éµå¾ªè¿™ä¸ªåè®®ï¼Œä½ éœ€è¦åšä»€ä¹ˆï¼Ÿ

æ³¨æ„ä½¿ç”¨ mutatingå…³é”®å­—æ¥å£°æ˜åœ¨ SimpleStructureä¸­ä½¿æ–¹æ³•å¯ä»¥ä¿®æ”¹ç»“æ„ä½“ã€‚åœ¨ SimpleClassä¸­åˆ™ä¸éœ€è¦è¿™æ ·å£°æ˜ï¼Œå› ä¸ºç±»é‡Œçš„æ–¹æ³•æ€»æ˜¯å¯ä»¥ä¿®æ”¹å…¶è‡ªèº«å±æ€§çš„ã€‚

ä½¿ç”¨ extensionæ¥ç»™ç°å­˜çš„ç±»å‹å¢åŠ åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´æ–°çš„æ–¹æ³•å’Œè®¡ç®—å±æ€§ã€‚ä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ¥ä½¿åè®®æ¥åˆ«å¤„å®šä¹‰çš„ç±»å‹ï¼Œæˆ–è€…ä½ å¯¼å…¥çš„å…¶ä»–åº“æˆ–æ¡†æ¶ã€‚



| 123456789 | extension Int: ExampleProtocol {  var simpleDescription: String {    return "The number \(self)"  }  mutating func adjust() {    self += 42  }}print(7.simpleDescription) |
| --------- | ------------------------------------------------------------ |
|           |                                                              |



> **å®éªŒ**
>
> ç»™ Doubleç±»å‹å†™ä¸€ä¸ªæ‰©å±•ï¼Œæ·»åŠ  absoluteValueå±æ€§ã€‚

ä½ å¯ä»¥ä½¿ç”¨åè®®åç§°å°±åƒå…¶ä»–å‘½åç±»å‹ä¸€æ ·â€”â€”æ¯”å¦‚è¯´ï¼Œåˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ä¸åŒç±»å‹ä½†æ˜¯éƒ½éµå¾ªåŒä¸€ä¸ªåè®®çš„å¯¹è±¡çš„é›†åˆã€‚å½“ä½ æ“ä½œç±»å‹æ˜¯åè®®ç±»å‹çš„å€¼çš„æ—¶å€™ï¼Œåè®®å¤–å®šä¹‰çš„æ–¹æ³•æ˜¯ä¸å¯ç”¨çš„ã€‚

| 123  | let protocolValue: ExampleProtocol = aprint(protocolValue.simpleDescription)*// print(protocolValue.anotherProperty) // Uncomment to see the error* |
| ---- | ------------------------------------------------------------ |
|      |                                                              |

å°½ç®¡å˜é‡ protocolValueæœ‰ SimpleClassçš„è¿è¡Œæ—¶ç±»å‹ï¼Œä½†ç¼–è¯‘å™¨è¿˜æ˜¯æŠŠå®ƒçœ‹åš ExampleProtocolã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½è®¿é—®ç±»åœ¨è¿™ä¸ªåè®®ä¸­æ‰©å±•çš„æ–¹æ³•æˆ–è€…å±æ€§ã€‚



## é”™è¯¯å¤„ç†

ä½ å¯ä»¥ç”¨ä»»ä½•éµå¾ª Error åè®®çš„ç±»å‹æ¥è¡¨ç¤ºé”™è¯¯ã€‚

| 12345 | enum PrinterError: Error {  case outOfPaper  case noToner  case onFire} |
| ----- | ------------------------------------------------------------ |
|       |                                                              |

ä½¿ç”¨ throw æ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯å¹¶ä¸”ç”¨ throws æ¥æ ‡è®°ä¸€ä¸ªå¯ä»¥æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ã€‚å¦‚æœä½ åœ¨å‡½æ•°é‡ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå‡½æ•°ä¼šç«‹å³è¿”å›å¹¶ä¸”è°ƒç”¨å‡½æ•°çš„ä»£ç ä¼šå¤„ç†é”™è¯¯ã€‚

| 123456 | func send(job: Int, toPrinter printerName: String) throws -> String {  if printerName == "Never Has Toner" {    throw PrinterError.noToner  }  return "Job sent"} |
| ------ | ------------------------------------------------------------ |
|        |                                                              |

æœ‰å¥½å‡ ç§æ–¹æ³•æ¥å¤„ç†é”™è¯¯ã€‚ä¸€ç§æ˜¯ä½¿ç”¨ do-catch ã€‚åœ¨ do ä»£ç å—é‡Œï¼Œä½ ç”¨ try æ¥åœ¨èƒ½æŠ›å‡ºé”™è¯¯çš„å‡½æ•°å‰æ ‡è®°ã€‚åœ¨ catch ä»£ç å—ï¼Œé”™è¯¯ä¼šè‡ªåŠ¨èµ‹äºˆåå­— error ï¼Œå¦‚æœä½ ä¸ç»™å®šå…¶ä»–åå­—çš„è¯ã€‚

| 123456 | do {  let printerResponse = try send(job: 1040, toPrinter: "Bi Sheng")  print(printerResponse)} catch {  print(error)} |
| ------ | ------------------------------------------------------------ |
|        |                                                              |



> å®éªŒ
>
> æ”¹å˜ printerçš„åå­—ä¸º "Never Has Toner"ï¼Œå¥½è®© send(job:toPrinter:)å‡½æ•°æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

ä½ å¯ä»¥æä¾›å¤šä¸ª catch ä»£ç å—æ¥å¤„ç†ç‰¹å®šçš„é”™è¯¯ã€‚ä½ å¯ä»¥åœ¨ catch åå†™ä¸€ä¸ªæ¨¡å¼ï¼Œç”¨æ³•å’Œ switch è¯­å¥é‡Œçš„ case ä¸€æ ·ã€‚



| 12345678910 | do {  let printerResponse = try send(job: 1440, toPrinter: "Gutenberg")  print(printerResponse)} catch PrinterError.onFire {  print("I'll just put this over here, with the rest of the fire.")} catch let printerError as PrinterError {  print("Printer error: \(printerError).")} catch {  print(error)} |
| ----------- | ------------------------------------------------------------ |
|             |                                                              |



> å®éªŒ
>
> æ·»åŠ ä¸€äº›ä»£ç æ¥åœ¨ do ä»£ç å—é‡ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ä½ è¦æŠ›å‡ºä»€ä¹ˆæ ·çš„é”™è¯¯æ‰èƒ½è®©ç¬¬ä¸€ä¸ª catch ä»£ç å—å¤„ç†åˆ°ï¼Ÿç¬¬äºŒä¸ªï¼Œç¬¬ä¸‰ä¸ªå‘¢ï¼Ÿ

å¦ä¸€ç§å¤„ç†é”™è¯¯çš„æ–¹æ³•æ˜¯ä½¿ç”¨ try? æ¥è½¬æ¢ç»“æœä¸ºå¯é€‰é¡¹ã€‚å¦‚æœå‡½æ•°æŠ›å‡ºäº†é”™è¯¯ï¼Œé‚£ä¹ˆé”™è¯¯è¢«å¿½ç•¥å¹¶ä¸”ç»“æœä¸º nil ã€‚å¦åˆ™ï¼Œç»“æœæ˜¯ä¸€ä¸ªåŒ…å«äº†å‡½æ•°è¿”å›å€¼çš„å¯é€‰é¡¹ã€‚

1. | 12   | let printerSuccess = try? send(job: 1884, toPrinter: "Mergenthaler")let printerFailure = try? send(job: 1885, toPrinter: "Never Has Toner") |
   | ---- | ------------------------------------------------------------ |
   |      |                                                              |

   ä½¿ç”¨

    

   defer

    æ¥å†™åœ¨å‡½æ•°è¿”å›åä¹Ÿä¼šè¢«æ‰§è¡Œçš„ä»£ç å—ï¼Œæ— è®ºæ˜¯å¦é”™è¯¯è¢«æŠ›å‡ºã€‚ä½ ç”šè‡³å¯ä»¥åœ¨æ²¡æœ‰é”™è¯¯å¤„ç†çš„æ—¶å€™ä½¿ç”¨

    

   defer

    ï¼Œæ¥ç®€åŒ–éœ€è¦åœ¨å¤šå¤„åœ°æ–¹è¿”å›çš„å‡½æ•°ã€‚



| 1234567891011121314 | var fridgeIsOpen = falselet fridgeContent = ["milk", "eggs", "leftovers"] func fridgeContains(_ food: String) -> Bool {  fridgeIsOpen = true  defer {    fridgeIsOpen = false  }    let result = fridgeContent.contains(food)  return result}fridgeContains("banana")print(fridgeIsOpen) |
| ------------------- | ------------------------------------------------------------ |
|                     |                                                              |



## æ³›å‹

æŠŠåå­—å†™åœ¨å°–æ‹¬å·é‡Œæ¥åˆ›å»ºä¸€ä¸ªæ³›å‹æ–¹æ³•æˆ–è€…ç±»å‹ã€‚

| 12345678 | func makeArray<Item>(repeating item: Item, numberOfTimes: Int) -> [Item] {  var result = [Item]()  for _ in 0..<numberOfTimes {    result.append(item)  }  return result}makeArray(repeating: "knock", numberOfTimes:4) |
| -------- | ------------------------------------------------------------ |
|          |                                                              |

ä½ å¯ä»¥ä»å‡½æ•°å’Œæ–¹æ³•åŒæ—¶è¿˜æœ‰ç±»ï¼Œæšä¸¾ä»¥åŠç»“æ„ä½“åˆ›å»ºæ³›å‹ã€‚





| 1234567 | *// Reimplement the Swift standard library's optional type*enum OptionalValue<Wrapped> {  case none  case some(Wrapped)}var possibleInteger: OptionalValue<Int> = .nonepossibleInteger = .some(100) |
| ------- | ------------------------------------------------------------ |
|         |                                                              |

åœ¨ç±»å‹åç§°åç´§æ¥ whereæ¥æ˜ç¡®ä¸€ç³»åˆ—éœ€æ±‚â€”â€”æ¯”å¦‚è¯´ï¼Œæ¥è¦æ±‚ç±»å‹å®ç°ä¸€ä¸ªåè®®ï¼Œè¦æ±‚ä¸¤ä¸ªç±»å‹å¿…é¡»ç›¸åŒï¼Œæˆ–è€…è¦æ±‚ç±»å¿…é¡»ç»§æ‰¿è‡ªç‰¹å®šçš„çˆ¶ç±»ã€‚

| 123456789101112 | func anyCommonElements<T: Sequence, U: Sequence>(_ lhs: T, _ rhs: U) -> Bool  where T.Iterator.Element: Equatable, T.Iterator.Element == U.Iterator.Element {    for lhsItem in lhs {      for rhsItem in rhs {        if lhsItem == rhsItem {          return true        }      }    }    return false}anyCommonElements([1, 2, 3], [3]) |
| --------------- | ------------------------------------------------------------ |
|                 |                                                              |



> **å®éªŒ**
>
> ä¿®æ”¹ anyCommonElements(_:_:)å‡½æ•°æ¥è¿”å›ä¸€ä¸ª ä¸¤ä¸ªæ•°ç»„ä¸­å…±æœ‰å…ƒç´  çš„æ•°ç»„ã€‚

å†™ <T: Equatable>å’Œ <T> ... where T: Equatableæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚













